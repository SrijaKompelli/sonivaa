{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\music_web_app-main\\\\music_web_app-main\\\\client\\\\src\\\\components\\\\Search.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ActionMenu = ({\n  track,\n  onAddFavorite,\n  onAddDiary,\n  onAddToPlaylist\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"action-menu\",\n    ref: menuRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"three-dots\",\n      onClick: () => setIsOpen(!isOpen),\n      children: \"\\u22EF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-dropdown\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onAddFavorite(track);\n          setIsOpen(false);\n        },\n        children: \"\\u2764 Add to Favorites\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onAddDiary(track);\n          setIsOpen(false);\n        },\n        children: \"\\uD83D\\uDCDD Add Diary Note\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onAddToPlaylist(track);\n          setIsOpen(false);\n        },\n        children: \"\\u2795 Add to Playlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }, this);\n};\n_s(ActionMenu, \"yIsVPXmGJnWJAXf4YKobPzEQ+oo=\");\n_c = ActionMenu;\nexport default function Search() {\n  _s2();\n  const [q, setQ] = useState('');\n  const [tracks, setTracks] = useState([]);\n  const [moodFilterState, setMoodFilterState] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [playingTrack, setPlayingTrack] = useState(null);\n  const audioRef = useRef(null);\n  useEffect(() => {\n    loadTracks();\n  }, []);\n  const loadTracks = async () => {\n    try {\n      const {\n        data\n      } = await api.get('/tracks');\n      // Normalize moods: some responses use `mood` (singular) while saved tracks use `moods` array\n      const normalized = (data || []).map(t => ({\n        ...t,\n        moods: Array.isArray(t.moods) ? t.moods : Array.isArray(t.mood) ? t.mood : t.mood ? [t.mood] : []\n      }));\n      setTracks(normalized);\n      setLoading(false);\n    } catch (err) {\n      console.error('Failed to load tracks:', err);\n      setLoading(false);\n    }\n  };\n  const search = async e => {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    try {\n      const {\n        data\n      } = await api.get('/tracks/search', {\n        params: {\n          q\n        }\n      });\n      setTracks(data);\n    } catch (err) {\n      console.error('Search failed:', err);\n    }\n  };\n  const save = async track => {\n    try {\n      await api.post('/tracks', track);\n      alert('Added to your library!');\n    } catch (err) {\n      alert('Failed to add to library');\n    }\n  };\n  const addFavorite = async track => {\n    try {\n      const payload = track._id ? {\n        trackId: track._id\n      } : {\n        url: track.url,\n        title: track.title,\n        artist: track.artist,\n        genre: track.genre,\n        coverImage: track.coverImage\n      };\n      await api.post('/users/favorites', payload);\n      alert('Added to favorites');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to add favorite');\n    }\n  };\n  const addDiary = async track => {\n    try {\n      const mood = prompt('Enter mood (happy, sad, romantic, energetic, peaceful, nostalgic, party):');\n      if (!mood) return;\n      const notes = prompt('Optional notes:');\n      let trackId = track._id || track.id;\n      if (!trackId) {\n        // ensure track exists in DB by adding to favorites (creates the track) and get id\n        const favResp = await api.post('/users/favorites', {\n          url: track.url,\n          title: track.title,\n          artist: track.artist,\n          genre: track.genre,\n          coverImage: track.coverImage\n        });\n        trackId = favResp.data.trackId;\n      }\n      const response = await api.post('/diary', {\n        track: trackId,\n        mood,\n        text: notes\n      });\n      alert('Diary entry added');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Diary error:', err);\n      const errorMessage = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to add diary entry';\n      alert(errorMessage);\n    }\n  };\n  const addToPlaylist = async track => {\n    try {\n      const {\n        data: lists\n      } = await api.get('/playlists/me');\n      if (!lists || lists.length === 0) {\n        if (!confirm('No playlists found. Create one now?')) return;\n        const title = prompt('Playlist title:');\n        if (!title) return;\n        const created = await api.post('/playlists', {\n          title,\n          description: '',\n          moodTags: []\n        });\n        lists.push(created.data || created);\n      }\n      const listNames = lists.map((l, i) => `${i + 1}. ${l.title}`).join('\\n');\n      const choice = prompt('Choose playlist number:\\n' + listNames);\n      const idx = parseInt(choice || '', 10) - 1;\n      if (isNaN(idx) || idx < 0 || idx >= lists.length) return alert('Invalid choice');\n      const playlist = lists[idx];\n      // append track id (ensure track exists in DB)\n      let trackId = track._id || track.id;\n      if (!trackId) {\n        const favResp = await api.post('/users/favorites', {\n          url: track.url,\n          title: track.title,\n          artist: track.artist,\n          genre: track.genre,\n          coverImage: track.coverImage\n        });\n        trackId = favResp.data.trackId;\n      }\n      const updatedTracks = Array.isArray(playlist.tracks) ? [...playlist.tracks.map(t => t._id || t), trackId] : [trackId];\n      await api.put(`/playlists/${playlist._id}`, {\n        tracks: updatedTracks\n      });\n      alert('Track added to playlist');\n    } catch (err) {\n      console.error(err);\n      alert('Failed to add to playlist');\n    }\n  };\n  const togglePlay = async track => {\n    if (playingTrack === track.url) {\n      audioRef.current.pause();\n      setPlayingTrack(null);\n    } else {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      // Only play tracks that have previews\n      if (track.hasPreview) {\n        console.log('Setting audio src to preview URL:', track.url);\n        audioRef.current.src = track.url;\n        try {\n          await audioRef.current.play();\n          setPlayingTrack(track.url);\n        } catch (err) {\n          console.error('Playback failed:', err);\n          alert('Unable to play this track. Preview may not be available.');\n        }\n      } else {\n        // Don't play tracks without previews - just show message\n        alert('This track preview is not available for playback.');\n      }\n    }\n  };\n  const filteredTracks = tracks.map(t => ({\n    ...t,\n    moods: Array.isArray(t.moods) ? t.moods : t.mood ? [t.mood] : []\n  })).filter(track => {\n    // base: only show tracks with preview when no text query and no mood filter\n    if (!q && !moodFilterState && !track.hasPreview) return false;\n    // text query filters title/artist/genre\n    if (q) {\n      const ql = q.toLowerCase();\n      if (track.title.toLowerCase().includes(ql) || track.artist.toLowerCase().includes(ql) || (track.genre || '').toLowerCase().includes(ql)) return true;\n      // if mood filter is set as text query fallback, still allow mood matching\n    }\n    // mood filter (explicit tag click)\n    if (moodFilterState) {\n      const mf = moodFilterState.toLowerCase();\n      if (Array.isArray(track.moods) && track.moods.map(m => m.toLowerCase()).includes(mf)) return true;\n      // also check singular `mood` prop if present\n      if (track.mood && (Array.isArray(track.mood) ? track.mood.map(m => m.toLowerCase()).includes(mf) : String(track.mood).toLowerCase() === mf)) return true;\n      return false;\n    }\n    // if no filters, include track if has preview\n    if (!q && !moodFilterState) return track.hasPreview;\n    // otherwise include (fallback)\n    return true;\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 12\n    }, this);\n  }\n  const moodFilter = m => {\n    // set explicit mood filter; clicking the same mood toggles it off\n    if (!m) {\n      setMoodFilterState('');\n      setQ('');\n      return;\n    }\n    if (moodFilterState && moodFilterState.toLowerCase() === m.toLowerCase()) {\n      setMoodFilterState('');\n      setQ('');\n    } else {\n      setMoodFilterState(m);\n      setQ('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Discover Music\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => moodFilter('happy'),\n          children: \"Happy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => moodFilter('sad'),\n          children: \"Sad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => moodFilter('study'),\n          children: \"Study\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => moodFilter('devotional'),\n          children: \"Devotional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => moodFilter('love'),\n          children: \"Love\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: search,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          value: q,\n          onChange: e => setQ(e.target.value),\n          placeholder: \"Search by title, artist, or genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"track-grid\",\n      children: filteredTracks.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-image-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: track.coverImage,\n            alt: track.title,\n            className: \"track-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), track.hasPreview && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"play-button\",\n            onClick: () => togglePlay(track),\n            children: playingTrack === track.url ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"track-title\",\n            children: track.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"track-artist\",\n            children: track.artist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"track-genre\",\n            children: [track.genre, \" \\u2022 \", track.duration]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8\n            },\n            children: (track.moods || []).slice(0, 5).map((m, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => moodFilter(m),\n              style: {\n                marginRight: 6,\n                marginBottom: 6,\n                padding: '4px 8px',\n                borderRadius: 12,\n                border: '1px solid rgba(0,0,0,0.12)',\n                background: moodFilterState && moodFilterState.toLowerCase() === String(m).toLowerCase() ? '#dfefff' : 'white',\n                cursor: 'pointer',\n                fontSize: '0.85rem'\n              },\n              children: m\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-actions\",\n            children: /*#__PURE__*/_jsxDEV(ActionMenu, {\n              track: track,\n              onAddFavorite: addFavorite,\n              onAddDiary: addDiary,\n              onAddToPlaylist: addToPlaylist\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, track.url, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: audioRef,\n      onEnded: () => setPlayingTrack(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_s2(Search, \"rFJDddLU2ZpNgZYFI6eCT5aS1Zc=\");\n_c2 = Search;\nvar _c, _c2;\n$RefreshReg$(_c, \"ActionMenu\");\n$RefreshReg$(_c2, \"Search\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsxDEV","_jsxDEV","ActionMenu","track","onAddFavorite","onAddDiary","onAddToPlaylist","_s","isOpen","setIsOpen","menuRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","ref","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","Search","_s2","q","setQ","tracks","setTracks","moodFilterState","setMoodFilterState","loading","setLoading","playingTrack","setPlayingTrack","audioRef","loadTracks","data","get","normalized","map","t","moods","Array","isArray","mood","err","console","error","search","e","preventDefault","params","save","post","alert","addFavorite","payload","_id","trackId","url","title","artist","genre","coverImage","_err$response","_err$response$data","response","message","addDiary","prompt","notes","id","favResp","text","_err$response2","_err$response2$data","errorMessage","addToPlaylist","lists","length","confirm","created","description","moodTags","push","listNames","l","i","join","choice","idx","parseInt","isNaN","playlist","updatedTracks","put","togglePlay","pause","hasPreview","log","src","play","filteredTracks","filter","ql","toLowerCase","includes","mf","m","String","moodFilter","style","display","gap","marginBottom","onSubmit","value","onChange","placeholder","alt","duration","marginTop","slice","marginRight","padding","borderRadius","border","background","cursor","fontSize","onEnded","_c2","$RefreshReg$"],"sources":["C:/Users/DELL/Downloads/music_web_app-main/music_web_app-main/client/src/components/Search.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport api from '../services/api';\n\nconst ActionMenu = ({ track, onAddFavorite, onAddDiary, onAddToPlaylist }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div className=\"action-menu\" ref={menuRef}>\n      <button className=\"three-dots\" onClick={() => setIsOpen(!isOpen)}>‚ãØ</button>\n      {isOpen && (\n        <div className=\"menu-dropdown\">\n          <button onClick={() => { onAddFavorite(track); setIsOpen(false); }}>‚ù§ Add to Favorites</button>\n          <button onClick={() => { onAddDiary(track); setIsOpen(false); }}>üìù Add Diary Note</button>\n          <button onClick={() => { onAddToPlaylist(track); setIsOpen(false); }}>‚ûï Add to Playlist</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default function Search() {\n  const [q, setQ] = useState('');\n  const [tracks, setTracks] = useState([]);\n  const [moodFilterState, setMoodFilterState] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [playingTrack, setPlayingTrack] = useState(null);\n  const audioRef = useRef(null);\n\n  useEffect(() => {\n    loadTracks();\n  }, []);\n\n  const loadTracks = async () => {\n    try {\n      const { data } = await api.get('/tracks');\n      // Normalize moods: some responses use `mood` (singular) while saved tracks use `moods` array\n      const normalized = (data || []).map(t => ({\n        ...t,\n        moods: Array.isArray(t.moods) ? t.moods : (Array.isArray(t.mood) ? t.mood : (t.mood ? [t.mood] : []))\n      }));\n      setTracks(normalized);\n      setLoading(false);\n    } catch (err) {\n      console.error('Failed to load tracks:', err);\n      setLoading(false);\n    }\n  };\n\n  const search = async (e) => {\n    e?.preventDefault();\n    try {\n      const { data } = await api.get('/tracks/search', { params: { q } });\n      setTracks(data);\n    } catch (err) {\n      console.error('Search failed:', err);\n    }\n  };\n\n  const save = async (track) => {\n    try {\n      await api.post('/tracks', track);\n      alert('Added to your library!');\n    } catch (err) {\n      alert('Failed to add to library');\n    }\n  };\n\n  const addFavorite = async (track) => {\n    try {\n      const payload = track._id ? { trackId: track._id } : { url: track.url, title: track.title, artist: track.artist, genre: track.genre, coverImage: track.coverImage };\n      await api.post('/users/favorites', payload);\n      alert('Added to favorites');\n    } catch (err) {\n      alert(err.response?.data?.message || 'Failed to add favorite');\n    }\n  };\n\n  const addDiary = async (track) => {\n    try {\n      const mood = prompt('Enter mood (happy, sad, romantic, energetic, peaceful, nostalgic, party):');\n      if (!mood) return;\n      const notes = prompt('Optional notes:');\n      let trackId = track._id || track.id;\n      if (!trackId) {\n        // ensure track exists in DB by adding to favorites (creates the track) and get id\n        const favResp = await api.post('/users/favorites', { url: track.url, title: track.title, artist: track.artist, genre: track.genre, coverImage: track.coverImage });\n        trackId = favResp.data.trackId;\n      }\n      const response = await api.post('/diary', { track: trackId, mood, text: notes });\n      alert('Diary entry added');\n    } catch (err) {\n      console.error('Diary error:', err);\n      const errorMessage = err.response?.data?.message || 'Failed to add diary entry';\n      alert(errorMessage);\n    }\n  };\n\n  const addToPlaylist = async (track) => {\n    try {\n      const { data: lists } = await api.get('/playlists/me');\n      if (!lists || lists.length === 0) {\n        if (!confirm('No playlists found. Create one now?')) return;\n        const title = prompt('Playlist title:');\n        if (!title) return;\n        const created = await api.post('/playlists', { title, description: '', moodTags: [] });\n        lists.push(created.data || created);\n      }\n      const listNames = lists.map((l, i) => `${i+1}. ${l.title}`).join('\\n');\n      const choice = prompt('Choose playlist number:\\n' + listNames);\n      const idx = parseInt(choice || '', 10) - 1;\n      if (isNaN(idx) || idx < 0 || idx >= lists.length) return alert('Invalid choice');\n      const playlist = lists[idx];\n      // append track id (ensure track exists in DB)\n      let trackId = track._id || track.id;\n      if (!trackId) {\n        const favResp = await api.post('/users/favorites', { url: track.url, title: track.title, artist: track.artist, genre: track.genre, coverImage: track.coverImage });\n        trackId = favResp.data.trackId;\n      }\n      const updatedTracks = Array.isArray(playlist.tracks) ? [...playlist.tracks.map(t=>t._id || t), trackId] : [trackId];\n      await api.put(`/playlists/${playlist._id}`, { tracks: updatedTracks });\n      alert('Track added to playlist');\n    } catch (err) {\n      console.error(err);\n      alert('Failed to add to playlist');\n    }\n  };\n\n  const togglePlay = async (track) => {\n    if (playingTrack === track.url) {\n      audioRef.current.pause();\n      setPlayingTrack(null);\n    } else {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      // Only play tracks that have previews\n      if (track.hasPreview) {\n        console.log('Setting audio src to preview URL:', track.url);\n        audioRef.current.src = track.url;\n        try {\n          await audioRef.current.play();\n          setPlayingTrack(track.url);\n        } catch (err) {\n          console.error('Playback failed:', err);\n          alert('Unable to play this track. Preview may not be available.');\n        }\n      } else {\n        // Don't play tracks without previews - just show message\n        alert('This track preview is not available for playback.');\n      }\n    }\n  };\n\n  const filteredTracks = tracks\n    .map(t => ({ ...t, moods: Array.isArray(t.moods) ? t.moods : (t.mood ? [t.mood] : []) }))\n    .filter(track => {\n      // base: only show tracks with preview when no text query and no mood filter\n      if (!q && !moodFilterState && !track.hasPreview) return false;\n      // text query filters title/artist/genre\n      if (q) {\n        const ql = q.toLowerCase();\n        if (\n          track.title.toLowerCase().includes(ql) ||\n          track.artist.toLowerCase().includes(ql) ||\n          (track.genre || '').toLowerCase().includes(ql)\n        ) return true;\n        // if mood filter is set as text query fallback, still allow mood matching\n      }\n      // mood filter (explicit tag click)\n      if (moodFilterState) {\n        const mf = moodFilterState.toLowerCase();\n        if (Array.isArray(track.moods) && track.moods.map(m=>m.toLowerCase()).includes(mf)) return true;\n        // also check singular `mood` prop if present\n        if (track.mood && (Array.isArray(track.mood) ? track.mood.map(m=>m.toLowerCase()).includes(mf) : String(track.mood).toLowerCase() === mf)) return true;\n        return false;\n      }\n      // if no filters, include track if has preview\n      if (!q && !moodFilterState) return track.hasPreview;\n      // otherwise include (fallback)\n      return true;\n    });\n\n  if (loading) {\n    return <div className=\"search-box\">Loading...</div>;\n  }\n\n  const moodFilter = (m) => {\n    // set explicit mood filter; clicking the same mood toggles it off\n    if (!m) { setMoodFilterState(''); setQ(''); return; }\n    if (moodFilterState && moodFilterState.toLowerCase() === m.toLowerCase()) {\n      setMoodFilterState('');\n      setQ('');\n    } else {\n      setMoodFilterState(m);\n      setQ('');\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"search-box\">\n        <h2>Discover Music</h2>\n        <div style={{ display: 'flex', gap: 8, marginBottom: 12 }}>\n          <button onClick={() => moodFilter('happy')}>Happy</button>\n          <button onClick={() => moodFilter('sad')}>Sad</button>\n          <button onClick={() => moodFilter('study')}>Study</button>\n          <button onClick={() => moodFilter('devotional')}>Devotional</button>\n          <button onClick={() => moodFilter('love')}>Love</button>\n        </div>\n        <form onSubmit={search}>\n          <input \n            value={q} \n            onChange={e => setQ(e.target.value)}\n            placeholder=\"Search by title, artist, or genre\"\n          />\n        </form>\n      </div>\n      \n      <div className=\"track-grid\">\n        {filteredTracks.map(track => (\n          <div key={track.url} className=\"track-card\">\n            <div className=\"track-image-container\">\n              <img\n                src={track.coverImage}\n                alt={track.title}\n                className=\"track-image\"\n              />\n              {track.hasPreview && (\n                <button className=\"play-button\" onClick={() => togglePlay(track)}>\n                  {playingTrack === track.url ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'}\n                </button>\n              )}\n            </div>\n            <div className=\"track-info\">\n              <h3 className=\"track-title\">{track.title}</h3>\n              <p className=\"track-artist\">{track.artist}</p>\n              <p className=\"track-genre\">{track.genre} ‚Ä¢ {track.duration}</p>\n                {/* Mood tags */}\n                <div style={{ marginTop: 8 }}>\n                  {(track.moods || []).slice(0,5).map((m, idx) => (\n                    <button\n                      key={idx}\n                      onClick={() => moodFilter(m)}\n                      style={{\n                        marginRight: 6,\n                        marginBottom: 6,\n                        padding: '4px 8px',\n                        borderRadius: 12,\n                        border: '1px solid rgba(0,0,0,0.12)',\n                        background: (moodFilterState && moodFilterState.toLowerCase() === String(m).toLowerCase()) ? '#dfefff' : 'white',\n                        cursor: 'pointer',\n                        fontSize: '0.85rem'\n                      }}\n                    >\n                      {m}\n                    </button>\n                  ))}\n                </div>\n                <div className=\"track-actions\">\n                <ActionMenu\n                  track={track}\n                  onAddFavorite={addFavorite}\n                  onAddDiary={addDiary}\n                  onAddToPlaylist={addToPlaylist}\n                />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <audio ref={audioRef} onEnded={() => setPlayingTrack(null)} />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}